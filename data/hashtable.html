Хеш-таблица
<p>Хештаблица интересна тем, что позволяет хранить множество пар ключ-значение и иметь произвольный доступ к этим парам по ключу.</p>
<p>К сожалению, я не покажу вам примеров реализации, поскольку ни разу не реализовывал её. Впрочем, я и вам бы не сильно советовал бы, разве что для собственного развития. Я лишь расскажу, как это работает.</p>
<p>Предположим, что в качестве ключа у нас выступает обычное число (пусть будет положительным). Так же предположим, что оно может быть совершенно любым (например, 4 миллиарда) и очевидно, что мы не можем себе позволить просто сделать такой огромный массив (это на примерно 4 гигабайта).</p>
<p>Поэтому нам нужен какой-то способ, чтобы «ужать» значения в более компактный промежуток, чтобы мы могли создать массив такого размера. Этот способ предоставляют хеш-функции (поэтому хеш-таблица и называется хеш-таблицей). Такие функции берут большие числа, либо же какие-либо бинарные данные (что, по сути, просто очень большие числа) и возвращают более адекватные числа, заключённые в определённом промежутке.</p>
<p>Самой простой хеш-функцией является такая функция, которая просто берёт N первых или последних бит числа, например.</p>
<p>Изначально мы создаём массив какого-то размера, элементами которого являются пустые списки (эти списки называются слотами или вёдрами (buckets)). Когда мы хотим поместить элемент в хештаблицу, мы берём хеш от его ключа, получаем соответствующее ведро и помещаем в начало или конец структуру, в которой хранится ключ и значение.</p>
<p>Когда мы хотим достать элемент по ключу, мы опять берём хеш от ключа, получаем ведро, проходимся по этому списку, находим элемент, ключ которого равен тому, который мы достаём и возвращаем значение. Мы не можем сохранять лишь значение по той причине, что хеш-функции подвержены коллизиям. Сами подумайте, если мы можем ужать более просторный промежуток значений в промежуток покороче, то если мы сопоставим каждому значению из короткого промежутка некое значение (одно) из большого, то в большом останется ещё много, у которых нет пары. А на самом деле у них есть отображение в один из элементов короткого. Поэтому несколько элементов могут быть сопоставлены одному. Поэтому нам нужно хранить их все.</p>
<p>С ростом количества элементов в хештаблице будет расти количество коллизий и скорость доступа к произвольному элементу будет падать (точнее к тем, у которых больше коллизий), поэтому когда элементов становится больше, чем нужно, размер таблицы увеличивают и выбирают хеш-функцию на более просторный диапазон значений (например, берут на один бит больше). Это довольно затратная операция, т.к. нужно обойти все элементы, содержащиеся в таблице, взять от них хеш и поместить в новую.</p>
